<!DOCTYPE html>
<html>
<head>
    <title>Socket.IO Test</title>
    <script src="http://localhost:5001/socket.io/socket.io.js"></script>
</head>
<body>
    <h1>Socket.IO Connection Test</h1>
    <div id="status">Connecting...</div>
    <div id="logs"></div>

    <script>
        const socket = io('http://localhost:5001');
        const statusDiv = document.getElementById('status');
        const logsDiv = document.getElementById('logs');

        function log(message) {
            console.log(message);
            logsDiv.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + message + '</p>';
        }

        socket.on('connect', () => {
            statusDiv.innerHTML = 'Connected! Socket ID: ' + socket.id;
            log('‚úÖ Connected to Socket.IO server');
            
            // Join a test room
            socket.emit('join', 'test-user-123');
            log('üè† Joining test room');
        });

        socket.on('joined', (data) => {
            log('‚úÖ Successfully joined room: ' + JSON.stringify(data));
        });

        socket.on('disconnect', () => {
            statusDiv.innerHTML = 'Disconnected';
            log('‚ùå Disconnected from Socket.IO server');
        });

        socket.on('connect_error', (error) => {
            statusDiv.innerHTML = 'Connection Error: ' + error.message;
            log('‚ùå Connection error: ' + error.message);
        });

        socket.on('newTransaction', (data) => {
            log('üí∞ New transaction received: ' + JSON.stringify(data));
        });

        socket.on('cacheInvalidate', (data) => {
            log('üóëÔ∏è Cache invalidation received: ' + JSON.stringify(data));
        });
    </script>
</body>
</html>
